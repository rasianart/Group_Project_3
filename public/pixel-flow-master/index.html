<!DOCTYPE html>
<html>
<head>
	<title>PixelFlow</title>

	<link href='http://fonts.googleapis.com/css?family=Merriweather:400,700|Raleway:600,300' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" href="styles/calibration.css">
	<link rel="stylesheet" type="text/css" href="styles/index.css">

	<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
	<script type="text/javascript" src="./scripts/pixel-flow.js"></script>
	<!-- <script type="text/javascript" src="./scripts/index.js"></script> -->
</head>
<body>
	<div id="content">
		<div class="img-wrapper" id="exp_0">
			<div class="btn-wrapper">
				<button data-func="rebase">Re-base Image</button>
				<button data-func="drawPixels">Pixelate</button>
				<button data-func="linearGradient">Gradient Pixelation</button>
			</div>
			<img src="media/me.jpg" width="1024px" height="681px" />
		</div>
</body>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.16.1/TweenMax.min.js"></script>

<script>
	$(window).load(function(){

		var funcOpts = [
				{
					'linearGradient' : {'location' : [0,0,.65,1], 'resolution' : [32,0]},
					'drawPixels' : {'resolution' : 16, 'offsetY' : 6},
					'lg' : {'location' : [-1,0,.65,1]},
					'wg' : [
						{'location' : [.85,.9,1,1], 'resolution' : [16,0]},
						{'location' : [.7,.7,.85,.85], 'resolution' : [0,16], 'rebase' : false}
					]
				},
				{
					'linearGradient' : {'location' : [0,.1,.5,1], 'resolution' : [32,0]},
					'drawPixels' : {'resolution' : 8},
					'lg' : {'location' : [-1,.1,.45,1]},
					'wg' : [
						{'location' : [.85,.9,1,1], 'resolution' : [16,0]},
						{'location' : [.7,.7,.85,.85], 'resolution' : [0,16], 'rebase' : false}
					]
				},
				{
					'linearGradient' : {'location' : [0,0,.48,1], 'resolution' : [32,0]},
					'drawPixels' : {'resolution' : 6},
					'lg' : {'location' : [-1,0,.48,1]},
					'wg' : [
						{'location' : [.85,.9,1,1], 'resolution' : [16,0]},
						{'location' : [.7,.7,.85,.85], 'resolution' : [0,16], 'rebase' : false}
					]
				},
				{
					'linearGradient' : {'location' : [0,.5,.9,1],'resolution' : [0,32]},
					'lg' : {'location' : [0,.5,.9,1], 'resolution' : [0,32]},
					'wg' : [
						{'location' : [.85,.9,1,1], 'resolution' : [16,0]},
						{'location' : [.7,.7,.85,.85], 'resolution' : [0,16], 'rebase' : false}
					]
				}
			];

		var $imgs = $('.img-wrapper img')
		  , resolution = 32
		  , delay = 200;

		var $cvs = $imgs.PixelFlow({'resolution': 32});

		$('.btn-wrapper button').on('click', function(ev){
			var $btn = $(this)
				, func = $btn.attr('data-func')
				, id = $btn.closest('.img-wrapper')[0].id.split('_')[1];
			$btn.closest('.img-wrapper').find('canvas').PixelFlow(func, funcOpts[id][func] || {} );
		});

	});




</script>
</html>
